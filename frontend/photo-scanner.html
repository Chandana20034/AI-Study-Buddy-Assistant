<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Photo Scanner - Upload or capture photos, extract text, translate, and summarize">
    <title>Photo Scanner - AI Study Assistant</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="css/theme-switcher.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js'></script>
    <style>
        .photo-scanner-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }

        .upload-section {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: 3rem;
            text-align: center;
            margin-bottom: 2rem;
            transition: all var(--transition-normal);
            cursor: pointer;
        }

        .upload-section:hover {
            border-color: var(--secondary-blue);
            background: rgba(30, 41, 59, 0.9);
        }

        .upload-section.dragover {
            border-color: var(--primary-pink);
            background: rgba(236, 72, 153, 0.1);
        }

        .upload-icon {
            font-size: 4rem;
            color: var(--secondary-blue);
            margin-bottom: 1rem;
        }

        .upload-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .preview-section {
            display: none;
            margin-bottom: 2rem;
        }

        .preview-section.active {
            display: block;
        }

        .image-preview {
            max-width: 100%;
            max-height: 500px;
            border-radius: var(--radius-lg);
            margin: 1rem 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .video-container {
            position: relative;
            max-width: 640px;
            margin: 0 auto;
        }

        #webcamVideo {
            width: 100%;
            border-radius: var(--radius-lg);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .capture-button {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: var(--gradient-primary);
            border: 4px solid white;
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .capture-button:hover {
            transform: translateX(-50%) scale(1.1);
        }

        .processing-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .processing-overlay.active {
            display: flex;
        }

        .processing-content {
            text-align: center;
            color: white;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top-color: var(--secondary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .results-section {
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .result-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .result-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-content {
            color: var(--text-secondary);
            line-height: 1.8;
            white-space: pre-wrap;
        }

        .language-selector {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1rem;
        }

        .language-selector select {
            flex: 1;
            padding: 0.75rem;
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 1rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .btn-icon {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
    </style>
</head>

<body>
    <!-- Animated Background -->
    <div class="animated-background"></div>

    <!-- Dashboard Wrapper with Sidebar -->
    <div class="dashboard-wrapper">
        <!-- Left Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <!-- Sidebar Brand -->
            <div class="sidebar-brand">
                <i class="fas fa-brain"></i>
                <span>AI Study Assistant</span>
            </div>

            <!-- Sidebar Navigation -->
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="sidebar-link">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="chat.html" class="sidebar-link">
                    <i class="fas fa-comments"></i>
                    <span>Chat</span>
                </a>
                <a href="tutor.html" class="sidebar-link">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span>Tutor</span>
                </a>
                <a href="explainer.html" class="sidebar-link">
                    <i class="fas fa-lightbulb"></i>
                    <span>Explainer</span>
                </a>
                <a href="quiz.html" class="sidebar-link">
                    <i class="fas fa-question-circle"></i>
                    <span>Quiz</span>
                </a>
                <a href="flashcards.html" class="sidebar-link">
                    <i class="fas fa-layer-group"></i>
                    <span>Flashcards</span>
                </a>
                <a href="summarizer.html" class="sidebar-link">
                    <i class="fas fa-file-alt"></i>
                    <span>Summarizer</span>
                </a>
                <a href="essay-grading.html" class="sidebar-link">
                    <i class="fas fa-pen-fancy"></i>
                    <span>Essay</span>
                </a>
                <a href="photo-scanner.html" class="sidebar-link active">
                    <i class="fas fa-camera"></i>
                    <span>Photo Scanner</span>
                </a>
                <a href="live-lecture.html" class="sidebar-link">
                    <i class="fas fa-microphone"></i>
                    <span>Live Lecture</span>
                </a>
                <a href="audio-recap.html" class="sidebar-link">
                    <i class="fas fa-headphones"></i>
                    <span>Audio Recap</span>
                </a>
                <a href="arcade.html" class="sidebar-link">
                    <i class="fas fa-gamepad"></i>
                    <span>Arcade</span>
                </a>
                <a href="links-manager.html" class="sidebar-link">
                    <i class="fas fa-link"></i>
                    <span>Links</span>
                </a>
                <a href="progress.html" class="sidebar-link">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress</span>
                </a>
                <a href="planner.html" class="sidebar-link">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Planner</span>
                </a>
                <a href="history.html" class="sidebar-link">
                    <i class="fas fa-history"></i>
                    <span>History</span>
                </a>
            </nav>

            <!-- User Profile Section -->
            <div class="sidebar-user">
                <div class="sidebar-user-info">
                    <div class="sidebar-user-avatar" id="userAvatar">C</div>
                    <div class="sidebar-user-details">
                        <div class="sidebar-user-name" id="userName">User</div>
                    </div>
                </div>
                <button class="sidebar-logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Top Header -->
            <header class="top-header">
                <!-- Mobile Menu Toggle -->
                <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle sidebar">
                    <i class="fas fa-bars"></i>
                </button>

                <!-- Search Bar -->
                <div class="navbar-search" style="max-width: 500px; margin: 0 auto; flex: 1;">
                    <i class="fas fa-search"></i>
                    <input type="text" id="navbarSearch" placeholder="Search features...">
                    <div class="search-results" id="searchResults"></div>
                </div>
            </header>

            <!-- Dashboard Container -->
            <div class="dashboard-container">
                <!-- Page Content -->
                <div class="photo-scanner-container">
                    <!-- Back Button -->
                    <a href="dashboard.html" class="back-button"
                        style="display: inline-flex; align-items: center; gap: 0.5rem; color: var(--text-secondary); text-decoration: none; margin-bottom: 1rem; padding: 0.5rem 1rem; background: rgba(30, 41, 59, 0.6); border-radius: var(--radius-md); transition: all 0.3s ease;">
                        <i class="fas fa-arrow-left"></i> Back to Dashboard
                    </a>

                    <div class="page-header">
                        <h1><i class="fas fa-camera"></i> Photo Scanner</h1>
                        <p>Upload photos or use webcam to extract text, translate, and generate summaries</p>
                    </div>

                    <!-- Upload Section -->
                    <div class="upload-section" id="uploadSection">
                        <i class="fas fa-cloud-upload-alt upload-icon"></i>
                        <h2>Upload or Capture Photo</h2>
                        <p style="color: var(--text-secondary); margin: 1rem 0;">
                            Drag and drop an image here, or click the buttons below
                        </p>
                        <div class="upload-buttons">
                            <button class="btn btn-primary btn-icon"
                                onclick="document.getElementById('fileInput').click()">
                                <i class="fas fa-file-upload"></i> Choose File
                            </button>
                            <button class="btn btn-secondary btn-icon" onclick="startWebcam()">
                                <i class="fas fa-camera"></i> Use Webcam
                            </button>
                        </div>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;"
                            onchange="handleFileSelect(event)">
                    </div>

                    <!-- Webcam Section -->
                    <div class="glass-card preview-section" id="webcamSection">
                        <h2 class="section-title"><i class="fas fa-video"></i> Webcam Capture</h2>
                        <div class="video-container">
                            <video id="webcamVideo" autoplay></video>
                            <button class="capture-button" onclick="capturePhoto()"></button>
                        </div>
                        <div style="text-align: center; margin-top: 1rem;">
                            <button class="btn btn-secondary" onclick="stopWebcam()">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </div>

                    <!-- Image Preview Section -->
                    <div class="glass-card preview-section" id="previewSection">
                        <h2 class="section-title"><i class="fas fa-image"></i> Image Preview</h2>
                        <img id="imagePreview" class="image-preview" alt="Preview">
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-icon" onclick="processImage()">
                                <i class="fas fa-magic"></i> Extract & Analyze
                            </button>
                            <button class="btn btn-secondary btn-icon" onclick="resetScanner()">
                                <i class="fas fa-redo"></i> Upload New
                            </button>
                        </div>
                    </div>

                    <!-- Results Section -->
                    <div class="results-section" id="resultsSection">
                        <!-- Extracted Text -->
                        <div class="result-card">
                            <div class="result-header">
                                <h3 class="result-title">
                                    <i class="fas fa-text-width" style="color: var(--secondary-blue);"></i>
                                    Extracted Text
                                </h3>
                                <button class="btn btn-secondary" onclick="copyToClipboard('extractedText')">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                            <div class="result-content" id="extractedText">Processing...</div>
                        </div>

                        <!-- Translation -->
                        <div class="result-card">
                            <div class="result-header">
                                <h3 class="result-title">
                                    <i class="fas fa-language" style="color: var(--primary-pink);"></i>
                                    Translation
                                </h3>
                            </div>
                            <div class="language-selector">
                                <select id="targetLanguage">
                                    <optgroup label="Major Languages">
                                        <option value="es">Spanish</option>
                                        <option value="fr">French</option>
                                        <option value="de">German</option>
                                        <option value="it">Italian</option>
                                        <option value="pt">Portuguese</option>
                                        <option value="ru">Russian</option>
                                        <option value="ja">Japanese</option>
                                        <option value="ko">Korean</option>
                                        <option value="zh">Chinese (Simplified)</option>
                                        <option value="zh-TW">Chinese (Traditional)</option>
                                        <option value="ar">Arabic</option>
                                    </optgroup>
                                    <optgroup label="South Asian Languages">
                                        <option value="hi">Hindi</option>
                                        <option value="bn">Bengali</option>
                                        <option value="te">Telugu</option>
                                        <option value="ta">Tamil</option>
                                        <option value="mr">Marathi</option>
                                        <option value="gu">Gujarati</option>
                                        <option value="kn">Kannada</option>
                                        <option value="ml">Malayalam</option>
                                        <option value="pa">Punjabi</option>
                                        <option value="ur">Urdu</option>
                                        <option value="ne">Nepali</option>
                                        <option value="si">Sinhala</option>
                                        <option value="or">Odia</option>
                                        <option value="as">Assamese</option>
                                    </optgroup>
                                    <optgroup label="European Languages">
                                        <option value="nl">Dutch</option>
                                        <option value="pl">Polish</option>
                                        <option value="tr">Turkish</option>
                                        <option value="uk">Ukrainian</option>
                                        <option value="cs">Czech</option>
                                        <option value="el">Greek</option>
                                        <option value="hu">Hungarian</option>
                                        <option value="ro">Romanian</option>
                                        <option value="sv">Swedish</option>
                                        <option value="da">Danish</option>
                                        <option value="fi">Finnish</option>
                                        <option value="no">Norwegian</option>
                                        <option value="sk">Slovak</option>
                                        <option value="bg">Bulgarian</option>
                                        <option value="hr">Croatian</option>
                                        <option value="sr">Serbian</option>
                                        <option value="sl">Slovenian</option>
                                        <option value="et">Estonian</option>
                                        <option value="lv">Latvian</option>
                                        <option value="lt">Lithuanian</option>
                                        <option value="ga">Irish</option>
                                        <option value="cy">Welsh</option>
                                        <option value="is">Icelandic</option>
                                        <option value="sq">Albanian</option>
                                        <option value="mk">Macedonian</option>
                                        <option value="bs">Bosnian</option>
                                        <option value="mt">Maltese</option>
                                        <option value="ca">Catalan</option>
                                        <option value="gl">Galician</option>
                                        <option value="eu">Basque</option>
                                        <option value="be">Belarusian</option>
                                    </optgroup>
                                    <optgroup label="Southeast Asian Languages">
                                        <option value="vi">Vietnamese</option>
                                        <option value="th">Thai</option>
                                        <option value="id">Indonesian</option>
                                        <option value="ms">Malay</option>
                                        <option value="tl">Filipino (Tagalog)</option>
                                        <option value="my">Myanmar (Burmese)</option>
                                        <option value="km">Khmer</option>
                                        <option value="lo">Lao</option>
                                        <option value="jw">Javanese</option>
                                        <option value="su">Sundanese</option>
                                    </optgroup>
                                    <optgroup label="Middle Eastern & African Languages">
                                        <option value="fa">Persian (Farsi)</option>
                                        <option value="he">Hebrew</option>
                                        <option value="sw">Swahili</option>
                                        <option value="am">Amharic</option>
                                        <option value="ha">Hausa</option>
                                        <option value="yo">Yoruba</option>
                                        <option value="ig">Igbo</option>
                                        <option value="zu">Zulu</option>
                                        <option value="xh">Xhosa</option>
                                        <option value="af">Afrikaans</option>
                                        <option value="so">Somali</option>
                                        <option value="mg">Malagasy</option>
                                    </optgroup>
                                    <optgroup label="Central Asian Languages">
                                        <option value="kk">Kazakh</option>
                                        <option value="uz">Uzbek</option>
                                        <option value="ky">Kyrgyz</option>
                                        <option value="tg">Tajik</option>
                                        <option value="az">Azerbaijani</option>
                                        <option value="ka">Georgian</option>
                                        <option value="hy">Armenian</option>
                                        <option value="mn">Mongolian</option>
                                    </optgroup>
                                    <optgroup label="Other Languages">
                                        <option value="eo">Esperanto</option>
                                        <option value="la">Latin</option>
                                        <option value="haw">Hawaiian</option>
                                        <option value="mi">Maori</option>
                                        <option value="ht">Haitian Creole</option>
                                        <option value="yi">Yiddish</option>
                                        <option value="ku">Kurdish</option>
                                        <option value="ps">Pashto</option>
                                    </optgroup>
                                </select>
                                <button class="btn btn-primary" onclick="translateText()">
                                    <i class="fas fa-exchange-alt"></i> Translate
                                </button>
                            </div>
                            <div class="result-content" id="translatedText">Click translate to see translation...</div>
                        </div>

                        <!-- AI Summary -->
                        <div class="result-card">
                            <div class="result-header">
                                <h3 class="result-title">
                                    <i class="fas fa-brain" style="color: var(--secondary-purple);"></i>
                                    AI Summary
                                </h3>
                                <button class="btn btn-secondary" onclick="saveToHistory()">
                                    <i class="fas fa-save"></i> Save
                                </button>
                            </div>
                            <div class="result-content" id="aiSummary">Generating summary...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Processing Overlay -->
    <div class="processing-overlay" id="processingOverlay">
        <div class="processing-content">
            <div class="spinner"></div>
            <h2>Processing Image...</h2>
            <p id="processingStatus">Extracting text from image</p>
        </div>
    </div>

    <script src="js/security.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="js/navbar-search.js"></script>
    <script src="js/photo-scanner.js"></script>
    <script src="js/theme-switcher.js"></script>
</body>

</html>